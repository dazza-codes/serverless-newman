service: newman

provider:
  name: aws
  runtime: nodejs12.x
  region: ${opt:region, 'us-west-2'}
  stage: ${opt:stage, 'dev'}

functions:
  newman:
    handler: handler.runNewmanTest
    timeout: 300
    memorySize: 512
    environment: 
      TEST_SUITE: testsuites/test.postman_collection.json
    layers:
      # Ref name is generated by TitleCasing
      # the layer name & appending LambdaLayer
      - { Ref: NewmanLibsLambdaLayer }

layers:
  newmanLibs:
    path: layer
    compatibleRuntimes:
      - nodejs12.x

package:
  individually: true
  exclude:
    - README.md
    - LICENSE
    - yarn.lock
